{"ast":null,"code":"var _jsxFileName = \"/Users/danielfindlay/Desktop/full-projects/diary/diary-app/src/pages/Stories.js\",\n    _s = $RefreshSig$();\n\nimport Controls from \"../components/UI/Controls\";\nimport StoryItems from \"../components/UI/StoryItems\";\nimport { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst stories = [{\n  id: 1,\n  title: \"This is an entry\",\n  topic: \"This is a topic\",\n  entry: \"This is a topic,finibus velit eu, sodales elit. Nullam a ex luctus, consequat dui sit amet, condimentum augue. Mauris viverra, enim sed tempor elementum, elit nisi accumsan mi, at \"\n}, {\n  id: 2,\n  title: \"This is an entry 2\",\n  topic: \"This is a topic\",\n  entry: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sollicitudin massa eu velit aliquet tincidunt. Nulla vitae euismod ligula. Vivamus sit amet sem id erat eleifend ultricies. Aenean vehicula sodales nibh a bibendum. Nam quis mauris sollicitudin, finibus velit \"\n}, {\n  id: 3,\n  title: \"This is an entry 3\",\n  topic: \"This is a topic\",\n  entry: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sollicitudin massa eu velit aliquet tincidunt. Nulla vitae euismod ligula. Vivamus sit amet sem id erat eleifend ultricies. Aenean vehicula sodales nibh a bibendum. Nam quis mauris sollicitudin, finibus velit eu, sodales elit. Nullam a ex luctus, consequat dui sit amet, condimentum augue. Mauris viverra, enim sed tempor elementum, elit nisi accumsan mi, at lobortis metus leo eget lorem. Nullam ac felis a justo rutrum aliquet vestibulum et tellus. Nullam ac lacus posuere, mollis urna sed, pulvinar velit. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aliquam pretium elit quis urna blandit varius. Sed tempus sem id diam cursus, pellentesque euismod nibh vehicula\"\n}, {\n  id: 4,\n  title: \"This is an entry 4\",\n  topic: \"This is a topic\",\n  entry: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sollicitudin massa eu velit aliquet tincidunt. Nulla vitae euismod ligula. Vivamus sit amet sem id erat eleifend ultricies. Aenean vehicula sodales nibh a bibendum. Nam quis mauris sollicitudin, finibus velit eu, sodales elit. Nullam a ex luctus, consequat dui sit amet, condimentum augue. Mauris viverra, enim sed tempor elementum, elit nisi accumsan mi, at lobortis metus leo eget lorem. Nullam ac felis a justo rutrum aliquet vestibulum et tellus. Nullam ac lacus posuere, mollis urna sed, pulvinar velit. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aliquam pretium elit quis urna blandit varius. Sed tempus sem id diam cursus, pellentesque euismod nibh vehicula\"\n}, {\n  id: 5,\n  title: \"This is an entry 4\",\n  topic: \"This is a topic\",\n  entry: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. \"\n}];\nconst classes = [\"stories-entry1\", \"stories-entry-large\", \"stories-entry-small1\", \"stories-entry-small2\", \"stories-entry2\"];\n\nconst Stories = () => {\n  _s();\n\n  const navigator = useNavigate();\n  const location = useLocation();\n  const params = location.search ? location.search : \"\";\n  let timerId;\n  const token = useSelector(state => state.auth.token);\n  const [wordLimit, setWordLimit] = useState(0);\n  const [storiesState, setStoriesState] = useState([]);\n  const [urlFilter, setUrlFilter] = useState(null);\n  useEffect(() => {\n    const apiCall = async () => {\n      try {\n        let query;\n\n        if (params && !urlFilter) {\n          query = params;\n        } else {\n          query = urlFilter;\n        }\n\n        const response = await fetch(`http://localhost:8080/api/entry/fetch${query}`, {\n          headers: {\n            \"Authorization\": `bearer ${token}`\n          }\n        });\n        const data = await response.json();\n        console.log(data);\n        setStoriesState(data);\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    const timer = setTimeout(() => {\n      buildFilter();\n      apiCall();\n    }, 5000);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [wordLimit]);\n\n  const SortChangeHandler = () => {\n    // check if acssending or decsending\n    // update state and call api\n    console.log(\"sort change handler\");\n  };\n\n  const rangeOnChangeHandler = e => {\n    setWordLimit(e.target.value);\n  };\n\n  const buildFilter = value => {\n    const filter = `?[gte]=${value}`;\n    setUrlFilter(filter);\n    navigator(filter);\n  };\n\n  const storyList = stories.map((story, index) => {\n    return /*#__PURE__*/_jsxDEV(StoryItems, {\n      classes: classes[index],\n      title: story.title,\n      topic: story.topic,\n      entry: story.entry\n    }, story.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"stories-grid\",\n    children: [/*#__PURE__*/_jsxDEV(Controls, {\n      wordLimit: wordLimit,\n      onSortChangeHandler: SortChangeHandler,\n      onChangeHandler: rangeOnChangeHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 10\n    }, this), storyList, /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"stories-pageCount\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Page count here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 49\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 8\n  }, this);\n};\n\n_s(Stories, \"eMDTTj6Kzrqbn3YggEe2tklSN5o=\", false, function () {\n  return [useNavigate, useLocation, useSelector];\n});\n\n_c = Stories;\nexport default Stories;\n\nvar _c;\n\n$RefreshReg$(_c, \"Stories\");","map":{"version":3,"sources":["/Users/danielfindlay/Desktop/full-projects/diary/diary-app/src/pages/Stories.js"],"names":["Controls","StoryItems","useEffect","useState","useSelector","useNavigate","useLocation","stories","id","title","topic","entry","classes","Stories","navigator","location","params","search","timerId","token","state","auth","wordLimit","setWordLimit","storiesState","setStoriesState","urlFilter","setUrlFilter","apiCall","query","response","fetch","headers","data","json","console","log","e","timer","setTimeout","buildFilter","clearTimeout","SortChangeHandler","rangeOnChangeHandler","target","value","filter","storyList","map","story","index"],"mappings":"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","sourcesContent":["import Controls from \"../components/UI/Controls\"\nimport StoryItems from \"../components/UI/StoryItems\"\nimport {useEffect , useState} from \"react\"\nimport {useSelector} from \"react-redux\"\nimport {useNavigate, useLocation} from \"react-router-dom\"\nconst stories = [\n    {\n        id: 1,\n        title: \"This is an entry\",\n        topic: \"This is a topic\",\n        entry: \"This is a topic,finibus velit eu, sodales elit. Nullam a ex luctus, consequat dui sit amet, condimentum augue. Mauris viverra, enim sed tempor elementum, elit nisi accumsan mi, at \"\n    },\n    {\n        id: 2,\n        title: \"This is an entry 2\",\n        topic: \"This is a topic\",\n        entry: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sollicitudin massa eu velit aliquet tincidunt. Nulla vitae euismod ligula. Vivamus sit amet sem id erat eleifend ultricies. Aenean vehicula sodales nibh a bibendum. Nam quis mauris sollicitudin, finibus velit \"\n    },\n    {\n        id: 3,\n        title: \"This is an entry 3\",\n        topic: \"This is a topic\",\n        entry: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sollicitudin massa eu velit aliquet tincidunt. Nulla vitae euismod ligula. Vivamus sit amet sem id erat eleifend ultricies. Aenean vehicula sodales nibh a bibendum. Nam quis mauris sollicitudin, finibus velit eu, sodales elit. Nullam a ex luctus, consequat dui sit amet, condimentum augue. Mauris viverra, enim sed tempor elementum, elit nisi accumsan mi, at lobortis metus leo eget lorem. Nullam ac felis a justo rutrum aliquet vestibulum et tellus. Nullam ac lacus posuere, mollis urna sed, pulvinar velit. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aliquam pretium elit quis urna blandit varius. Sed tempus sem id diam cursus, pellentesque euismod nibh vehicula\"\n    },\n    {\n        id: 4,\n        title: \"This is an entry 4\",\n        topic: \"This is a topic\",\n        entry: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sollicitudin massa eu velit aliquet tincidunt. Nulla vitae euismod ligula. Vivamus sit amet sem id erat eleifend ultricies. Aenean vehicula sodales nibh a bibendum. Nam quis mauris sollicitudin, finibus velit eu, sodales elit. Nullam a ex luctus, consequat dui sit amet, condimentum augue. Mauris viverra, enim sed tempor elementum, elit nisi accumsan mi, at lobortis metus leo eget lorem. Nullam ac felis a justo rutrum aliquet vestibulum et tellus. Nullam ac lacus posuere, mollis urna sed, pulvinar velit. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aliquam pretium elit quis urna blandit varius. Sed tempus sem id diam cursus, pellentesque euismod nibh vehicula\"\n    },\n    {\n        id: 5,\n        title: \"This is an entry 4\",\n        topic: \"This is a topic\",\n        entry: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. \"\n    }\n\n        \n]\nconst classes = [\"stories-entry1\", \"stories-entry-large\", \"stories-entry-small1\", \"stories-entry-small2\", \"stories-entry2\" ]\nconst Stories = () => {\n    const navigator = useNavigate()\n    const location = useLocation()\n    const params = location.search ? location.search : \"\"\n    let timerId;\n    const token = useSelector(state => state.auth.token)\n    const [wordLimit, setWordLimit] = useState(0)\n    const [storiesState, setStoriesState] = useState([])\n    const [urlFilter, setUrlFilter] = useState(null)\n\n    useEffect(() => {\n        const apiCall = async () => {\n            try{\n                let query;\n                if (params && !urlFilter) {\n                    query = params;\n                  } else {\n                    query = urlFilter;\n                  }\n                const response = await fetch(`http://localhost:8080/api/entry/fetch${query}`, {\n                    headers:{\n                        \"Authorization\": `bearer ${token}`\n                    }\n                })\n                const data = await response.json()\n                console.log(data)\n                setStoriesState(data)\n            }\n            catch(e) {\n                console.log(e)\n            }\n    \n        }\n       const timer =  setTimeout(() => {\n           buildFilter()\n           apiCall()\n       }, 5000)\n       return () => {\n           clearTimeout(timer)\n       }\n    }, [wordLimit])\n  \n    const SortChangeHandler = () => {\n        // check if acssending or decsending\n        // update state and call api\n        console.log(\"sort change handler\")\n    }\n    const rangeOnChangeHandler =  (e) => {\n        setWordLimit(e.target.value)\n    \n    }\n    const buildFilter = (value) => {\n        const filter = `?[gte]=${value}`\n        setUrlFilter(filter)\n        navigator(filter)\n    }\n\n  const storyList =  stories.map((story, index) => {\n       return <StoryItems classes={classes[index]} title={story.title} topic={story.topic} entry={story.entry} key={story.id}/>\n    })\n\n    return (\n       <section className=\"stories-grid\">\n         <Controls wordLimit={wordLimit} onSortChangeHandler={SortChangeHandler} onChangeHandler={rangeOnChangeHandler}/>\n        {storyList}\n         <section className=\"stories-pageCount\"><h1>Page count here</h1></section>\n       </section>\n    )\n}\n\nexport default Stories\n"]},"metadata":{},"sourceType":"module"}