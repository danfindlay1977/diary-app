{"ast":null,"code":"export const getEntries = token => async dispatch => {\n  const getData = async () => {\n    try {\n      const response = await fetch(\"/api/entry/fetch\", {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `bearer ${token}`\n        }\n      });\n\n      if (!response) {\n        throw new Error(\"something went wrong\");\n      }\n\n      const data = await response.json();\n      return data.entries;\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  try {\n    const entriesData = await getData();\n    dispatch({\n      type: \"LOAD_ITEMS\",\n      payload: entriesData\n    });\n  } catch (e) {\n    console.log(e); // add an error dispatch\n  }\n};\nexport const addEntry = (data, token) => async dispatch => {\n  const sendData = async () => {\n    try {\n      const response = await fetch(\"/api/entry/create\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `bearer ${token}`\n        },\n        body: JSON.stringify(data)\n      });\n\n      if (!response) {\n        throw new Error(\"something went wrong\");\n      }\n\n      const resData = await response.json();\n\n      if (!resData.entry) {\n        return;\n      }\n\n      return resData.entry;\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  try {\n    const entry = await sendData();\n    console.log(entry);\n\n    if (!entry) {\n      throw new Error(\"something went wrong\");\n    } else {\n      dispatch({\n        type: \"ADD_ENTRY\",\n        payload: entry\n      });\n    }\n  } catch (e) {\n    console.log(e);\n  }\n};\nexport const deleteEntry = (id, token) => async dispatch => {\n  const sendData = async () => {\n    const response = await fetch(`/api/entry/delete/${id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `bearer ${token}`\n      }\n    });\n    return await response.json();\n  };\n\n  try {\n    await sendData();\n    dispatch({\n      type: \"DELETE_ENTRY\",\n      payload: id\n    });\n  } catch (e) {\n    console.log(e);\n  }\n};\nexport const searchEntries = (searchTerms, token) => async dispatch => {\n  const sendData = async () => {\n    const response = await fetch(`/api/entry/search${searchTerms}`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `bearer ${token}`\n      }\n    });\n    console.log(response);\n    return await response.json();\n  };\n\n  try {\n    const entries = await sendData();\n    dispatch({\n      action: \"SET_SEARCH_ITEMS\",\n      payload: entries\n    });\n  } catch (e) {\n    console.log(\"in catch\");\n    console.log(e);\n  }\n};","map":{"version":3,"sources":["/Users/danielfindlay/Desktop/full-projects/diary/diary-app/src/store/actions/action.js"],"names":["getEntries","token","dispatch","getData","response","fetch","headers","Error","data","json","entries","e","console","log","entriesData","type","payload","addEntry","sendData","method","body","JSON","stringify","resData","entry","deleteEntry","id","searchEntries","searchTerms","action"],"mappings":"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","sourcesContent":[" export const getEntries = (token) =>   async (dispatch) => {\n      const getData = async () => {\n        try{\n            const response = await fetch(\"/api/entry/fetch\", {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": `bearer ${token}`\n                },\n            });\n            if(!response){\n                throw new Error(\"something went wrong\")\n            } \n            const data = await response.json() \n            return data.entries\n        }\n        catch(e){\n            console.log(e)\n        }\n      }\n    try{\n        const entriesData = await getData()\n        dispatch({type: \"LOAD_ITEMS\", payload: entriesData})\n\n    }\n    catch(e) {\n        console.log(e)\n        // add an error dispatch\n    }\n    \n    \n}\n\nexport const addEntry = (data, token) => async (dispatch) => {\n    const sendData = async () => {\n        try{\n            const response = await fetch(\"/api/entry/create\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": `bearer ${token}`\n                },\n                body: JSON.stringify(data)\n            })\n            if(!response){\n                throw new Error(\"something went wrong\")\n            } \n            const resData = await response.json()\n             if(!resData.entry) {\n                return \n            } \n            return resData.entry\n        }\n        catch(e) {\n            console.log(e)\n        }\n\n    }\n    try{\n        const entry = await sendData()\n        console.log(entry)\n        if(!entry) {\n            throw new Error(\"something went wrong\")\n        }\n        else{\n            dispatch({type:\"ADD_ENTRY\", payload: entry})\n        }\n        \n        \n    }\n    catch(e) {\n        console.log(e)\n    }\n}\n\nexport const deleteEntry = (id, token) => async (dispatch) => {\n    const sendData = async () => {\n        const response = await fetch(`/api/entry/delete/${id}`, {\n            method:\"DELETE\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `bearer ${token}`\n            },\n        })\n        return  await response.json()\n    }\n    try{\n        await sendData()\n        dispatch({type:\"DELETE_ENTRY\", payload:id})\n    }\n    catch(e) {\n        console.log(e)\n    }\n}\n\nexport const searchEntries = (searchTerms, token) => async (dispatch) => {\n    const sendData = async () => {\n        const response = await fetch(`/api/entry/search${searchTerms}`, {\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `bearer ${token}`\n            }, \n        })\n        console.log(response)\n        return await response.json()\n    }\n    try{\n       const entries = await sendData()\n        dispatch({action: \"SET_SEARCH_ITEMS\", payload: entries})\n\n    }\n    catch(e) {\n        console.log(\"in catch\")\n        console.log(e)\n    }\n}"]},"metadata":{},"sourceType":"module"}